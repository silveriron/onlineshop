<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../base/includes/head', {title: '회원가입'})%>
    <link rel="stylesheet" href="css/form.css" />
    <script
      src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"
      defer
    ></script>
    <script src="script/form.js" defer></script>
    <script src="script/address.js" defer></script>
  </head>
  <body>
    <%- include('../base/includes/header') %>
    <main>
      <h1>회원가입</h1>
      <section>
        <h2><%= inputData.errorMassage %></h2>
      </section>
      <hr />
      <form action="/signup" method="POST" id="signUpForm">
        <input type="hidden" name="_csrf" value="<%= locals.csrfToken %>" />
        <table>
          <tbody>
            <tr>
              <th>
                <label for="email">이메일</label>
              </th>
              <td>
                <input
                  id="email"
                  name="email"
                  type="email"
                  value="<%= inputData.email %>"
                  required
                />
                <button
                  class="formBtn"
                  id="duplicateCheck"
                  type="button"
                  data-csrfToken="<%= locals.csrfToken %>"
                >
                  중복확인
                </button>
                <p id="emailNotInput">이메일을 입력해주세요.</p>
                <p id="duplicateAlert">이미 가입된 이메일입니다.</p>
                <p id="signUpAvailable">가입 가능한 이메일입니다.</p>
              </td>
            </tr>
            <tr>
              <th>
                <label for="password">비밀번호</label>
              </th>
              <td>
                <input
                  id="password"
                  name="password"
                  type="password"
                  minlength="6"
                  required
                />
              </td>
            </tr>
            <tr>
              <th>
                <label for="confirm-password">비밀번호 확인</label>
              </th>
              <td>
                <input
                  id="confirm-password"
                  name="confirm-password"
                  type="password"
                  required
                />
                <p id="invalidPassword"></p>
              </td>
            </tr>
            <tr>
              <th>
                <label for="name">이름</label>
              </th>
              <td>
                <input
                  id="name"
                  name="name"
                  type="text"
                  value="<%= inputData.name %>"
                  required
                />
              </td>
            </tr>
            <tr>
              <th>
                <label for="address">주소</label>
              </th>
              <td>
                <input
                  id="address"
                  name="address"
                  type="text"
                  value="<%= inputData.address.address %>"
                  placeholder="주소"
                  required
                />
                <button
                  class="formBtn"
                  onclick="execDaumPostcode()"
                  type="button"
                >
                  주소찾기
                </button>
              </td>
            </tr>
            <tr>
              <th></th>
              <td>
                <input
                  id="postcode"
                  name="postcode"
                  value="<%= inputData.address.postcode %>"
                  placeholder="우편번호"
                />
                <input
                  id="detailAddress"
                  name="detailAddress"
                  value="<%= inputData.address.detailAddress %>"
                  placeholder="상세주소"
                />
              </td>
            </tr>
          </tbody>
        </table>
        <div id="btnDiv">
          <button class="Btn">가입하기</button>
        </div>
        <a id="loginLink" href="/login">로그인하러 가기</a>
      </form>
    </main>
  </body>
</html>
